{"ast":null,"code":"var _jsxFileName = \"/Users/jakobstrozberg/Desktop/nonamehackathon/noname-shopping-list/src/components/ProductSuggestion.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search } from 'lucide-react';\nimport { CSVDataLoader } from '../utils/csvLoader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ProductSuggestion = ({\n  value,\n  onChange,\n  onProductSelect,\n  placeholder = \"Enter product name...\",\n  className = \"\"\n}) => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [filteredProducts, setFilteredProducts] = useState([]);\n  const [highlightedIndex, setHighlightedIndex] = useState(-1);\n  const [isLoadingData, setIsLoadingData] = useState(false);\n  const dropdownRef = useRef(null);\n  const inputRef = useRef(null);\n\n  // Load CSV data on component mount\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoadingData(true);\n      try {\n        await CSVDataLoader.loadProducts();\n      } catch (error) {\n        console.error('Failed to load product data:', error);\n      } finally {\n        setIsLoadingData(false);\n      }\n    };\n    loadData();\n  }, []);\n  useEffect(() => {\n    if (value.length >= 2 && !isLoadingData) {\n      const filtered = CSVDataLoader.searchProducts(value, 8);\n      setFilteredProducts(filtered);\n      setIsOpen(filtered.length > 0);\n    } else {\n      setFilteredProducts([]);\n      setIsOpen(false);\n    }\n    setHighlightedIndex(-1);\n  }, [value, isLoadingData]);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n  const handleKeyDown = e => {\n    if (!isOpen) return;\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setHighlightedIndex(prev => prev < filteredProducts.length - 1 ? prev + 1 : prev);\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setHighlightedIndex(prev => prev > 0 ? prev - 1 : -1);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (highlightedIndex >= 0) {\n          handleProductSelect(filteredProducts[highlightedIndex]);\n        }\n        break;\n      case 'Escape':\n        setIsOpen(false);\n        setHighlightedIndex(-1);\n        break;\n    }\n  };\n  const handleProductSelect = product => {\n    onChange(product.name);\n    onProductSelect === null || onProductSelect === void 0 ? void 0 : onProductSelect(product);\n    setIsOpen(false);\n    setHighlightedIndex(-1);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `product-suggestion ${className}`,\n    ref: dropdownRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        value: value,\n        onChange: e => onChange(e.target.value),\n        onKeyDown: handleKeyDown,\n        placeholder: placeholder,\n        className: \"input product-input\",\n        autoComplete: \"off\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Search, {\n        className: \"search-icon\",\n        size: 16\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this), isLoadingData && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-indicator\",\n        children: \"Loading products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), isOpen && filteredProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"suggestions-dropdown\",\n      children: filteredProducts.map((product, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `suggestion-item ${index === highlightedIndex ? 'highlighted' : ''}`,\n        onClick: () => handleProductSelect(product),\n        onMouseEnter: () => setHighlightedIndex(index),\n        children: [product.image && /*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.image,\n          alt: product.name,\n          className: \"product-image\",\n          onError: e => {\n            e.currentTarget.style.display = 'none';\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"product-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-name\",\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-description\",\n            children: product.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 17\n          }, this), product.brand && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-brand\",\n            children: product.brand\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 15\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n};\n_s(ProductSuggestion, \"NB8NpnghVeUW4f7z4IL6FVHVGq0=\");\n_c = ProductSuggestion;\nvar _c;\n$RefreshReg$(_c, \"ProductSuggestion\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","CSVDataLoader","jsxDEV","_jsxDEV","ProductSuggestion","value","onChange","onProductSelect","placeholder","className","_s","isOpen","setIsOpen","filteredProducts","setFilteredProducts","highlightedIndex","setHighlightedIndex","isLoadingData","setIsLoadingData","dropdownRef","inputRef","loadData","loadProducts","error","console","length","filtered","searchProducts","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","handleKeyDown","e","key","preventDefault","prev","handleProductSelect","product","name","ref","children","type","onKeyDown","autoComplete","fileName","_jsxFileName","lineNumber","columnNumber","size","map","index","onClick","onMouseEnter","image","src","alt","onError","currentTarget","style","display","description","brand","id","_c","$RefreshReg$"],"sources":["/Users/jakobstrozberg/Desktop/nonamehackathon/noname-shopping-list/src/components/ProductSuggestion.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Product } from '../types';\nimport { ChevronDown, Search } from 'lucide-react';\nimport { CSVDataLoader } from '../utils/csvLoader';\n\ninterface ProductSuggestionProps {\n  value: string;\n  onChange: (value: string) => void;\n  onProductSelect?: (product: Product) => void;\n  placeholder?: string;\n  className?: string;\n}\n\n\n\nexport const ProductSuggestion: React.FC<ProductSuggestionProps> = ({\n  value,\n  onChange,\n  onProductSelect,\n  placeholder = \"Enter product name...\",\n  className = \"\"\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filteredProducts, setFilteredProducts] = useState<Product[]>([]);\n  const [highlightedIndex, setHighlightedIndex] = useState(-1);\n  const [isLoadingData, setIsLoadingData] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Load CSV data on component mount\n  useEffect(() => {\n    const loadData = async () => {\n      setIsLoadingData(true);\n      try {\n        await CSVDataLoader.loadProducts();\n      } catch (error) {\n        console.error('Failed to load product data:', error);\n      } finally {\n        setIsLoadingData(false);\n      }\n    };\n    \n    loadData();\n  }, []);\n\n  useEffect(() => {\n    if (value.length >= 2 && !isLoadingData) {\n      const filtered = CSVDataLoader.searchProducts(value, 8);\n      setFilteredProducts(filtered);\n      setIsOpen(filtered.length > 0);\n    } else {\n      setFilteredProducts([]);\n      setIsOpen(false);\n    }\n    setHighlightedIndex(-1);\n  }, [value, isLoadingData]);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (!isOpen) return;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setHighlightedIndex(prev => \n          prev < filteredProducts.length - 1 ? prev + 1 : prev\n        );\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setHighlightedIndex(prev => prev > 0 ? prev - 1 : -1);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (highlightedIndex >= 0) {\n          handleProductSelect(filteredProducts[highlightedIndex]);\n        }\n        break;\n      case 'Escape':\n        setIsOpen(false);\n        setHighlightedIndex(-1);\n        break;\n    }\n  };\n\n  const handleProductSelect = (product: Product) => {\n    onChange(product.name);\n    onProductSelect?.(product);\n    setIsOpen(false);\n    setHighlightedIndex(-1);\n  };\n\n  return (\n    <div className={`product-suggestion ${className}`} ref={dropdownRef}>\n      <div className=\"input-container\">\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          onKeyDown={handleKeyDown}\n          placeholder={placeholder}\n          className=\"input product-input\"\n          autoComplete=\"off\"\n        />\n        <Search className=\"search-icon\" size={16} />\n        {isLoadingData && (\n          <div className=\"loading-indicator\">Loading products...</div>\n        )}\n      </div>\n\n      {isOpen && filteredProducts.length > 0 && (\n        <div className=\"suggestions-dropdown\">\n          {filteredProducts.map((product, index) => (\n            <div\n              key={product.id}\n              className={`suggestion-item ${index === highlightedIndex ? 'highlighted' : ''}`}\n              onClick={() => handleProductSelect(product)}\n              onMouseEnter={() => setHighlightedIndex(index)}\n            >\n              {product.image && (\n                <img \n                  src={product.image} \n                  alt={product.name}\n                  className=\"product-image\"\n                  onError={(e) => {\n                    e.currentTarget.style.display = 'none';\n                  }}\n                />\n              )}\n              <div className=\"product-info\">\n                <div className=\"product-name\">{product.name}</div>\n                <div className=\"product-description\">{product.description}</div>\n                {product.brand && (\n                  <div className=\"product-brand\">{product.brand}</div>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}